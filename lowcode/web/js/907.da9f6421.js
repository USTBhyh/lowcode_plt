"use strict";(self["webpackChunklowcode"]=self["webpackChunklowcode"]||[]).push([[907],{6729:function(e,a,l){l.d(a,{z:function(){return n}});var t=l(2074);const n=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{t.ZP.success("复制成功",2)})).catch((e=>{t.ZP.success("复制失败",2),console.log(e)}));else{const a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),a.setSelectionRange(0,a.value.length),document.execCommand("Copy"),document.body.removeChild(a),t.ZP.success("复制成功",2)}}},2907:function(e,a,l){l.r(a),l.d(a,{default:function(){return x}});l(7658);var t=l(3396),n=l(4870),u=l(7139),o=l(4161),i=l(3927),c={icon:function(e,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M232 706h142c22.1 0 40 17.9 40 40v142h250V264H232v442z",fill:a}},{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32z",fill:e}},{tag:"path",attrs:{d:"M704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z",fill:e}}]}},name:"copy",theme:"twotone"},s=c,r=l(9388);function d(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),t.forEach((function(a){v(e,a,l[a])}))}return e}function v(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var p=function(e,a){var l=d({},e,a.attrs);return(0,t.Wm)(r.Z,d({},l,{icon:s}),null)};p.displayName="CopyTwoTone",p.inheritAttrs=!1;var m=p,h=l(2074),f=l(6729);const g=e=>((0,t.dD)("data-v-5534c7c2"),e=e(),(0,t.Cn)(),e),w=g((()=>(0,t._)("span",null," 主集合名 ",-1))),y=g((()=>(0,t._)("span",null," 主集合属性 ",-1))),b=g((()=>(0,t._)("span",null," 补充集合名 ",-1))),k=g((()=>(0,t._)("span",null," 补充集合属性 ",-1)));var S={__name:"DataCollection",setup(e){const a=(0,n.iH)(0),l=(0,n.iH)(1),c=(0,n.iH)(10),s=(0,n.iH)([]),r=(0,n.iH)([]),d=(0,n.iH)(""),v=(0,n.iH)([]),p=(0,n.iH)(""),g=(0,n.iH)([]),S=(0,n.iH)([]),_=(0,n.iH)(!1),H=(0,n.iH)(!1),x=(0,n.iH)([]),C=(0,t.Fl)((()=>r.value.find((e=>e.schemaName==d.value))?.fields.map((e=>({value:e.fieldName}))))),W=(0,n.iH)([]),z=(0,t.Fl)((()=>r.value.find((e=>e.schemaName==p.value))?.fields.map((e=>({value:e.fieldName}))))),U=[{title:"序号",dataIndex:"key",key:"key"},{title:"主集合",dataIndex:"mainSchema",key:"mainSchema"},{title:"补充集合",dataIndex:"subSchema",key:"subSchema"}];function O(e){s.value=e.map(((e,a)=>{const t=[],n=[];for(let l of e)Array.isArray(l)?n.push(l):t.push(l);return{key:(l.value-1)*c.value+a+1,mainSchema:t,subSchema:n}}))}function j(e,a){var l=new URLSearchParams;l.append("page",e),l.append("pageSize",a),l.append("value",JSON.stringify([{schema:d.value,fields:[...v.value]},{schema:p.value,fields:[...g.value]}])),o.Z.get("dataShow.do",l).then((e=>{O(e.data),H.value=!1})).catch((e=>{h.ZP.error("搜索失败"),console.log(e)}))}function N(e,a){j(e,a)}function P(e){S.value=e,_.value=!0}return(0,t.bv)((()=>{o.Z.get("getType.do").then((e=>{r.value=e.data.map((e=>(e.fields=e.fields.map((e=>({fieldName:e}))),{schemaName:e.schemaName,fields:e.fields}))),x.value=r.value.map((e=>({value:e.schemaName}))),W.value=r.value.map((e=>({value:e.schemaName})))})).catch((e=>{console.log(e)}))})),(e,o)=>{const r=(0,t.up)("a-select"),h=(0,t.up)("a-col"),O=(0,t.up)("a-row"),Z=(0,t.up)("a-button"),I=(0,t.up)("a-pagination"),T=(0,t.up)("a-divider"),M=(0,t.up)("a-tag"),V=(0,t.up)("a-table"),D=(0,t.up)("a-list-item"),A=(0,t.up)("a-list"),q=(0,t.up)("a-modal"),E=(0,t.up)("a-layout");return(0,t.wg)(),(0,t.j4)(E,{class:"container"},{default:(0,t.w5)((()=>[(0,t.Wm)(O,{style:{margin:"10px"},justify:"center"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"gutter-row",span:6},{default:(0,t.w5)((()=>[w,(0,t.Wm)(r,{value:d.value,"onUpdate:value":o[0]||(o[0]=e=>d.value=e),options:x.value,style:{width:"200px"}},null,8,["value","options"])])),_:1}),(0,t.Wm)(h,{class:"gutter-row",span:6},{default:(0,t.w5)((()=>[y,(0,t.Wm)(r,{value:v.value,"onUpdate:value":o[1]||(o[1]=e=>v.value=e),"max-tag-count":3,options:C.value,mode:"multiple",style:{width:"200px"}},null,8,["value","options"])])),_:1}),(0,t.Wm)(h,{class:"gutter-row",span:6},{default:(0,t.w5)((()=>[b,(0,t.Wm)(r,{value:p.value,"onUpdate:value":o[2]||(o[2]=e=>p.value=e),options:W.value,style:{width:"200px"}},null,8,["value","options"])])),_:1}),(0,t.Wm)(h,{class:"gutter-row",span:6},{default:(0,t.w5)((()=>[k,(0,t.Wm)(r,{value:g.value,"onUpdate:value":o[3]||(o[3]=e=>g.value=e),"max-tag-count":3,options:z.value,mode:"multiple",style:{width:"200px"}},null,8,["value","options"])])),_:1})])),_:1}),(0,t.Wm)(Z,{type:"primary",shape:"round",loading:H.value,class:"search-button",onClick:o[4]||(o[4]=e=>j(1,c.value))},{icon:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(i.Z))])),default:(0,t.w5)((()=>[(0,t.Uk)(" 搜索选定内容 ")])),_:1},8,["loading"]),(0,t.Wm)(I,{current:l.value,"onUpdate:current":o[5]||(o[5]=e=>l.value=e),pageSize:c.value,"onUpdate:pageSize":o[6]||(o[6]=e=>c.value=e),total:a.value,showSizeChanger:!1,"show-total":e=>`总共有 ${e} 条记录`,"show-less-items":"","show-quick-jumper":"",class:"pagination",onChange:o[7]||(o[7]=(e,a)=>N(e,a))},null,8,["current","pageSize","total","show-total"]),(0,t.Wm)(T,{class:"divider"}),(0,t.Wm)(V,{dataSource:s.value,columns:U,pagination:!1,loading:H.value,size:"small",style:{"margin-left":"10px","margin-right":"10px"},bordered:""},{bodyCell:(0,t.w5)((({column:e,text:a,record:l})=>["mainSchema"===e.dataIndex?((0,t.wg)(),(0,t.j4)(M,{key:0,onClick:()=>P(a)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 主集合记录 1 ")])),_:2},1032,["onClick"])):"subSchema"===e.dataIndex?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)(a,((e,a)=>((0,t.wg)(),(0,t.j4)(M,{key:a,onClick:()=>P(e)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 补充集合记录 "+(0,u.zw)(a+1),1)])),_:2},1032,["onClick"])))),128)):(0,t.kq)("",!0)])),_:1},8,["dataSource","loading"]),(0,t.Wm)(q,{visible:_.value,"onUpdate:visible":o[8]||(o[8]=e=>_.value=e),title:"记录详情",okText:"确定",cancelText:" ",destroyOnClose:!0,onOk:o[9]||(o[9]=()=>_.value=!1)},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{bordered:"","data-source":S.value},{renderItem:(0,t.w5)((({item:e})=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,u.zw)(e.schema)+"-"+(0,u.zw)(e.field),1),(0,t._)("div",null,[(0,t.Uk)((0,u.zw)(e.value)+" ",1),(0,t.Wm)((0,n.SU)(m),{onClick:()=>(0,n.SU)(f.z)(e.value)},null,8,["onClick"])])])),_:2},1024)])),_:1},8,["data-source"])])),_:1},8,["visible"])])),_:1})}}},_=l(89);const H=(0,_.Z)(S,[["__scopeId","data-v-5534c7c2"]]);var x=H}}]);
//# sourceMappingURL=907.da9f6421.js.map