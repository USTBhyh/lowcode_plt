"use strict";(self["webpackChunklowcode"]=self["webpackChunklowcode"]||[]).push([[882],{2882:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});a(7658);var l=a(3396),n=a(4870),o=a(2074),i=a(4161),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},r=c,u=a(9388);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){d(e,t,a[t])}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=function(e,t){var a=s({},e,t.attrs);return(0,l.Wm)(u.Z,s({},a,{icon:r}),null)};f.displayName="PlusCircleOutlined",f.inheritAttrs=!1;var m=f,v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},p=v;function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){y(e,t,a[t])}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=function(e,t){var a=b({},e,t.attrs);return(0,l.Wm)(u.Z,b({},a,{icon:p}),null)};h.displayName="SyncOutlined",h.inheritAttrs=!1;var w=h,g=a(2235),k=a(3318),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},W=O;function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){U(e,t,a[t])}))}return e}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S=function(e,t){var a=C({},e,t.attrs);return(0,l.Wm)(u.Z,C({},a,{icon:W}),null)};S.displayName="MinusCircleOutlined",S.inheritAttrs=!1;var N=S,j={__name:"ModeDefinition",setup(e){const t=(0,n.iH)([]),a=(0,n.iH)([]),c=(0,n.iH)(!1),r=(0,n.iH)(!1),u=(0,n.iH)([{title:"序号",dataIndex:"key",key:"key"},{title:"数据模式名称",dataIndex:"schemaName",key:"schemaName"},{title:"数据模式操作",dataIndex:"operation"}]);function s(){t.value.push({key:t.value.length+1,schemaName:"",fields:[]})}function d(){a.value.push({fieldName:""})}function f(e){a.value.splice(e,1)}function v(e){a.value=e,c.value=!0}function p(){c.value=!1}function b(e){a.value=e,r.value=!0}function y(){r.value=!1,o.ZP.success("字段编辑成功")}function h(e){t.value=t.value.filter((t=>t.key!=e)),t.value.forEach(((e,t)=>{e.key=t+1}))}function O(e){W()}function W(){const e=JSON.parse(JSON.stringify(t.value));for(let t of e){const e=t.fields.map((e=>e.fieldName));t.fields=e}console.log(e),i.Z.post("saveType.do",e).then((e=>{console.log(e.data),"Type saved!"==e.data&&o.ZP.success("成功更新数据模式")})).catch((e=>{o.ZP.error("更新数据模式失败"),console.log(e)}))}return(0,l.wF)((()=>{i.Z.get("getType.do").then((e=>{const a=e.data;t.value=a.map(((e,t)=>(e.fields=e.fields.map((e=>({fieldName:e}))),{key:t+1,schemaName:e.typeName,fields:e.fields})))})).catch((e=>{console.log(e)}))})),(e,o)=>{const i=(0,l.up)("a-button"),W=(0,l.up)("a-popconfirm"),C=(0,l.up)("a-layout"),U=(0,l.up)("a-divider"),S=(0,l.up)("a-input"),j=(0,l.up)("a-table"),x=(0,l.up)("a-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(C,{class:"container"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{class:"operation"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{onClick:s,shape:"round"},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(m))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 添加数据模式 ")])),_:1}),(0,l.Wm)(W,{title:"确定要更新数据吗",placement:"bottom","ok-text":"确定","cancel-text":"取消",onConfirm:O},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{shape:"round"},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(w))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 更新数据 ")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(U,{class:"divider"}),(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(j,{dataSource:t.value,columns:u.value,pagination:!1,loading:e.loading,size:"small",style:{"margin-left":"10px","margin-right":"10px"},bordered:""},{bodyCell:(0,l.w5)((({column:e,text:t,record:a})=>["schemaName"===e.dataIndex?((0,l.wg)(),(0,l.j4)(S,{key:0,value:a.schemaName,"onUpdate:value":e=>a.schemaName=e,placeholder:"请输入数据模式名称"},null,8,["value","onUpdate:value"])):"operation"===e.dataIndex?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Wm)(i,{onClick:()=>v(a.fields),size:"small"},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(g.Z))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 查看字段 ")])),_:2},1032,["onClick"]),(0,l.Wm)(i,{onClick:()=>b(a.fields),size:"small"},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(k.Z))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 编辑字段 ")])),_:2},1032,["onClick"]),(0,l.Wm)(W,{title:"确定删除",placement:"bottom","ok-text":"确定","cancel-text":"取消",onConfirm:()=>h(a.key)},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{size:"small"},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(N))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 删除数据模式 ")])),_:1})])),_:2},1032,["onConfirm"])],64)):(0,l.kq)("",!0)])),title:(0,l.w5)((()=>[(0,l.Uk)(" 模式定义信息 ")])),_:1},8,["dataSource","columns","loading"])])),_:1})])),_:1}),(0,l.Wm)(x,{editFieldVisible:"",visible:r.value,"onUpdate:visible":o[0]||(o[0]=e=>r.value=e),title:"编辑字段",cancelText:" ",okText:"确认",destroyOnClose:!0,onOk:y},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{onClick:d},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(m))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 添加字段 ")])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.value,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l.Wm)(S,{value:e.fieldName,"onUpdate:value":t=>e.fieldName=t,placeholder:"字段名称"},{addonAfter:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(N),{onClick:()=>f(t)},null,8,["onClick"])])),_:2},1032,["value","onUpdate:value"])])))),128))])),_:1},8,["visible"]),(0,l.Wm)(x,{visible:c.value,"onUpdate:visible":o[1]||(o[1]=e=>c.value=e),title:"查看字段",cancelText:" ",okText:"确认",destroyOnClose:!0,onOk:p},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.value,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l.Wm)(S,{value:e.fieldName,"onUpdate:value":t=>e.fieldName=t,placeholder:"字段名称",disabled:""},null,8,["value","onUpdate:value"])])))),128))])),_:1},8,["visible"])],64)}}},x=a(89);const _=(0,x.Z)(j,[["__scopeId","data-v-35205f4c"]]);var P=_}}]);
//# sourceMappingURL=882.5dc5fe50.js.map