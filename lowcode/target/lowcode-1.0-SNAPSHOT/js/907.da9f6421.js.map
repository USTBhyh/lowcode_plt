{"version":3,"file":"js/907.da9f6421.js","mappings":"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","sources":["webpack://lowcode/./src/utils/copyText.js","webpack://lowcode/./node_modules/@ant-design/icons-svg/es/asn/CopyTwoTone.js","webpack://lowcode/./node_modules/@ant-design/icons-vue/es/icons/CopyTwoTone.js","webpack://lowcode/./src/views/admin/DataCollection.vue","webpack://lowcode/./src/views/admin/DataCollection.vue?864f"],"sourcesContent":["// 文本复制至剪贴板\r\n\r\nimport { message } from \"ant-design-vue\";\r\n\r\n/**\r\n * 文本复制\r\n * @param {String} text 待复制的文本\r\n */\r\nexport const copyText = (text) => {\r\n  // 只支持　https 和 localhost 环境\r\n  if(navigator.clipboard) {\r\n    navigator.clipboard.writeText(text)\r\n    .then(() => {\r\n      message.success(\"复制成功\", 2);\r\n    }).catch((error) => {\r\n      message.success(\"复制失败\", 2);\r\n      console.log(error);\r\n    })\r\n  }\r\n  else {\r\n    const inputElement = document.createElement(\"input\");\r\n    inputElement.value = text;\r\n    document.body.appendChild(inputElement);\r\n    inputElement.select();\r\n    inputElement.setSelectionRange(0, inputElement.value.length);\r\n    document.execCommand('Copy');\r\n    document.body.removeChild(inputElement);\r\n    message.success(\"复制成功\", 2);\r\n  }\r\n}","// This icon file is generated automatically.\nvar CopyTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M232 706h142c22.1 0 40 17.9 40 40v142h250V264H232v442z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32z\", \"fill\": primaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z\", \"fill\": primaryColor } }] }; }, \"name\": \"copy\", \"theme\": \"twotone\" };\nexport default CopyTwoTone;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport CopyTwoToneSvg from \"@ant-design/icons-svg/es/asn/CopyTwoTone\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar CopyTwoTone = function CopyTwoTone(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": CopyTwoToneSvg\n  }), null);\n};\n\nCopyTwoTone.displayName = 'CopyTwoTone';\nCopyTwoTone.inheritAttrs = false;\nexport default CopyTwoTone;","<template>\r\n  <!-- 数据汇总页面 -->\r\n  <a-layout class=\"container\">\r\n    <a-row style=\"margin: 10px;\" justify=\"center\">\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 主集合名 </span>\r\n        <a-select\r\n          v-model:value=\"mainSchema\"\r\n          :options=\"mainSchemas\"\r\n          style=\"width: 200px\"\r\n        ></a-select>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 主集合属性 </span>\r\n        <!--\r\n          :max-tag-count=\"3\" 设置最多显示 3 个选项\r\n        -->\r\n        <a-select\r\n          v-model:value=\"mainField\"\r\n          :max-tag-count=\"3\"\r\n          :options=\"mainFields\"\r\n          mode=\"multiple\"\r\n          style=\"width: 200px\"\r\n        >\r\n        </a-select>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 补充集合名 </span>\r\n        <a-select\r\n          v-model:value=\"subSchema\"\r\n          :options=\"subSchemas\"\r\n          style=\"width: 200px\"\r\n        ></a-select>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 补充集合属性 </span>\r\n        <!--\r\n          :max-tag-count=\"3\" 设置最多显示 3 个选项\r\n        -->\r\n        <a-select\r\n          v-model:value=\"subField\"\r\n          :max-tag-count=\"3\"\r\n          :options=\"subFields\"\r\n          mode=\"multiple\"\r\n          style=\"width: 200px\"\r\n        ></a-select>\r\n      </a-col>\r\n    </a-row>\r\n    <!-- 搜索键 -->\r\n    <a-button \r\n      type=\"primary\" \r\n      shape=\"round\" \r\n      :loading=\"loading\"\r\n      class=\"search-button\"\r\n      @click=\"search(1, pageSize)\"\r\n    >\r\n      <template #icon>\r\n        <SearchOutlined />\r\n      </template>\r\n      搜索选定内容\r\n    </a-button>\r\n    \r\n    <!-- 分页器 -->\r\n    <a-pagination \r\n      v-model:current=\"current\" \r\n      v-model:pageSize=\"pageSize\"\r\n      :total=\"infoTotal\"\r\n      :showSizeChanger=\"false\"\r\n      :show-total=\"total => `总共有 ${total} 条记录`\"\r\n      show-less-items\r\n      show-quick-jumper\r\n      class=\"pagination\"\r\n      @change=\"(page, pageSize) => pageChange(page, pageSize)\"\r\n    />\r\n\r\n    <!-- 分割线 -->\r\n    <a-divider class=\"divider\"></a-divider>\r\n\r\n    <!-- 数据集合 -->\r\n    <a-table\r\n      :dataSource=\"infoGroup\" \r\n      :columns=\"columns\"\r\n      :pagination=\"false\"\r\n      :loading=\"loading\"  \r\n      size=\"small\"\r\n      style=\"margin-left: 10px; margin-right: 10px;\"\r\n      bordered\r\n    >\r\n      <template #bodyCell=\"{ column, text, record }\">\r\n        <template v-if=\"column.dataIndex === 'mainSchema'\">\r\n          <a-tag @click=\"() => selectRecord(text)\"> 主集合记录 1 </a-tag>\r\n        </template>\r\n        <template v-else-if=\"column.dataIndex === 'subSchema'\">\r\n          <template v-for=\"(item, index) in text\" :key=\"index\">\r\n            <a-tag @click=\"() => selectRecord(item)\"> 补充集合记录 {{ index + 1 }} </a-tag>\r\n          </template>\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n    \r\n    <!-- 提示等 -->\r\n    <!-- 记录具体内容 -->\r\n    <a-modal\r\n      v-model:visible=\"recordVisible\" \r\n      title=\"记录详情\"\r\n      okText=\"确定\"\r\n      cancelText=\" \"\r\n      :destroyOnClose=true\r\n      @ok=\"() => recordVisible = false\"\r\n    >\r\n      <a-list bordered :data-source=\"selectedRecord\">\r\n        <template #renderItem=\"{ item }\">\r\n          <a-list-item>\r\n            <div>{{ item.schema }}-{{ item.field }}</div>  \r\n            <div>\r\n              {{ item.value }} \r\n              <copy-two-tone @click=\"() => copyText(item.value)\"/>\r\n            </div>\r\n          </a-list-item>\r\n        </template>\r\n      </a-list>\r\n    </a-modal>\r\n  </a-layout>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { SearchOutlined, CopyTwoTone } from '@ant-design/icons-vue';\r\nimport { message } from 'ant-design-vue';\r\nimport { copyText } from '@/utils/copyText';\r\n\r\n// 记录总条数\r\nconst infoTotal = ref(0);\r\n// 当前页\r\nconst current = ref(1);\r\n// 每页条数\r\nconst pageSize = ref(10);\r\n\r\n// 信息集合\r\nconst infoGroup = ref([]);\r\n\r\n// 类型数据\r\nconst typeDatas = ref([]);\r\n\r\n// 选中主集合名\r\nconst mainSchema = ref(\"\");\r\n// 选中主集合属性\r\nconst mainField = ref([]);\r\n// 选中补充集合名\r\nconst subSchema = ref(\"\");\r\n// 选中补充集合属性\r\nconst subField = ref([]);\r\n\r\n// 当前选中的记录\r\nconst selectedRecord = ref([]);\r\n\r\n// 记录显示情况\r\nconst recordVisible = ref(false);\r\n\r\n// 搜索执行情况\r\nconst loading = ref(false);\r\n\r\n// 主集合名\r\nconst mainSchemas = ref([]);\r\n// 主集合属性\r\nconst mainFields = computed(() => {\r\n  return typeDatas.value.find(val => val.schemaName == mainSchema.value)?.fields.map(val => {\r\n    return {value: val.fieldName};\r\n  });\r\n});\r\n// 补充集合名\r\nconst subSchemas = ref([]);\r\n// 补充集合属性\r\nconst subFields = computed(() => {\r\n  return typeDatas.value.find(val => val.schemaName == subSchema.value)?.fields.map(val => {\r\n    return {value: val.fieldName};\r\n  });\r\n});\r\n\r\n// 表格列的配置描述\r\nconst columns = [\r\n  {\r\n    title: \"序号\",\r\n    dataIndex: \"key\",\r\n    key: \"key\",\r\n  },\r\n  {\r\n    title: \"主集合\",\r\n    dataIndex: \"mainSchema\",\r\n    key: \"mainSchema\",\r\n  },\r\n  {\r\n    title: \"补充集合\",\r\n    dataIndex: \"subSchema\",\r\n    key: \"subSchema\",\r\n  }\r\n]\r\n\r\n// 创建信息集合\r\nfunction createInfoGroupGroup(data) {\r\n  infoGroup.value = data.map((info, index) => {\r\n    const mainSchemaInfo = [];\r\n    const subSchemaInfo = [];\r\n    for(let val of info) {\r\n      if(!Array.isArray(val)) mainSchemaInfo.push(val);\r\n      else subSchemaInfo.push(val);\r\n    }\r\n    return {\r\n      key: (current.value - 1) * pageSize.value + index + 1,\r\n      mainSchema: mainSchemaInfo,\r\n      subSchema: subSchemaInfo\r\n    }\r\n  });\r\n}\r\n  \r\n\r\n// 搜索\r\nfunction search(page, pageSize) {\r\n  // 参数\r\n  var params = new URLSearchParams();\r\n  params.append(\"page\", page);\r\n  params.append(\"pageSize\", pageSize);\r\n  params.append(\"value\", JSON.stringify([\r\n        {schema: mainSchema.value, fields: [...mainField.value]},\r\n        {schema: subSchema.value, fields: [...subField.value]}\r\n      ]));\r\n  // 后端接入后使用\r\n  // loading.value = true;\r\n  axios.get(\"dataShow.do\", params).then((result) => {\r\n    createInfoGroupGroup(result.data);\r\n    loading.value = false;\r\n  }).catch((error) => {\r\n    message.error(\"搜索失败\");\r\n    console.log(error);\r\n  })\r\n}\r\n\r\n// 页数改变 \r\nfunction pageChange(page, pageSize) {\r\n  search(page, pageSize);\r\n}\r\n\r\n// 选中记录\r\nfunction selectRecord(record) {\r\n  selectedRecord.value = record;\r\n  recordVisible.value = true;\r\n}\r\n\r\n// 在组件挂载完成后执行\r\nonMounted(() => {\r\n  axios.get('getType.do')\r\n    .then((result) => {\r\n      typeDatas.value = result.data.map(val => {\r\n        val.fields = val.fields.map(field => ({\r\n          \"fieldName\": field\r\n        }));\r\n        return {\r\n          \"schemaName\": val.schemaName,\r\n          \"fields\": val.fields\r\n        };\r\n      });\r\n      mainSchemas.value = typeDatas.value.map(val => {\r\n        return {value: val.schemaName};\r\n      });\r\n      subSchemas.value = typeDatas.value.map(val => {\r\n        return {value: val.schemaName};\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  height: 100%;\r\n}\r\n\r\n.search-button {\r\n  margin: 6px auto;\r\n  width: 200px;\r\n}\r\n\r\n.pagination {\r\n  margin: 10px auto;\r\n}\r\n\r\n.divider {\r\n  margin-top: 0;\r\n  /* border-color: #1890ff; */\r\n}\r\n\r\n@media (max-height: 480px) {\r\n  /* .container {\r\n    display: none;\r\n  } */\r\n}\r\n</style>","import script from \"./DataCollection.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DataCollection.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DataCollection.vue?vue&type=style&index=0&id=5534c7c2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\86153\\\\OneDrive\\\\桌面\\\\软工\\\\lowcode\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5534c7c2\"]])\n\nexport default __exports__"],"names":["copyText","text","navigator","clipboard","writeText","then","message","catch","error","console","log","inputElement","document","createElement","value","body","appendChild","select","setSelectionRange","length","execCommand","removeChild","CopyTwoTone","primaryColor","secondaryColor","_objectSpread","target","i","arguments","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","CopyTwoToneSvg","displayName","inheritAttrs","infoTotal","ref","current","pageSize","infoGroup","typeDatas","mainSchema","mainField","subSchema","subField","selectedRecord","recordVisible","loading","mainSchemas","mainFields","computed","find","val","schemaName","fields","map","fieldName","subSchemas","subFields","columns","title","dataIndex","createInfoGroupGroup","data","info","index","mainSchemaInfo","subSchemaInfo","Array","isArray","push","search","page","params","URLSearchParams","append","JSON","stringify","schema","axios","result","pageChange","selectRecord","record","onMounted","field","__exports__"],"sourceRoot":""}