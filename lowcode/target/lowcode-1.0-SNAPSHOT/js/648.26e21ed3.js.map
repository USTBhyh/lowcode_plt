{"version":3,"file":"js/648.26e21ed3.js","mappings":"onGAMA,MAAMA,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,mNC4BA,MAAMC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAGRC,GAASC,EAAAA,EAAAA,IAAI,IAGbC,GAAWD,EAAAA,EAAAA,IAAI,CAAC,MAAQ,OAAO,QAAU,KAG/C,SAASE,IACP,MAAMC,EAAa,GACnB,IAAI,IAAIC,KAAOH,EAASI,MAAMC,QACL,QAApBF,EAAIG,QAAQC,MAAsC,WAApBJ,EAAIG,QAAQC,MAC3CL,EAAWM,KAAK,CACdC,MAAON,EAAIM,MACXF,KAAMJ,EAAII,KACVH,MAAOD,EAAIG,QAAQF,QAIzB,MAAMM,EAAiBC,KAAKC,UAAUV,GACtCW,EAAAA,EAAAA,KAAW,cAAe,CACxBX,WAAYQ,IAEXI,MAAMC,IACLC,QAAQC,IAAIF,EAAOG,KAAKlB,UACxBN,EAAOc,KAAK,CAAEW,KAAM,oBAAqB,IACxCC,OAAOC,IACRL,QAAQC,IAAII,EAAI,GAEtB,C,OAGAC,EAAAA,EAAAA,KAAc,KACZxB,EAAOM,MAAQR,GAAO2B,OAAOzB,OAG7B,MAAM0B,EAAS,IAAIC,gBACnBD,EAAOE,OAAO,SAAU5B,EAAOM,OAG/BS,EAAAA,EAAAA,KAAW,cAAeW,GACvBV,MAAMC,IACLC,QAAQC,IAAIF,EAAOG,MACnBlB,EAASI,MAAQW,EAAOG,KAEN,IAAfH,EAAOG,MACRxB,EAAOc,KAAK,CAAEW,KAAM,YACtB,IACCC,OAAOC,IACRL,QAAQC,IAAII,EAAI,GAChB,I,+zBClFN,MAAM5B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://lowcode/./src/components/Form/FormGenerator.vue","webpack://lowcode/./src/views/user/PublicSubmission.vue","webpack://lowcode/./src/views/user/PublicSubmission.vue?0c79"],"sourcesContent":["import script from \"./FormGenerator.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./FormGenerator.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./FormGenerator.vue?vue&type=style&index=0&id=224bb6e0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\86153\\\\OneDrive\\\\桌面\\\\软工\\\\lowcode\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-224bb6e0\"]])\n\nexport default __exports__","<template>\r\n  <!-- 表单填写界面 -->\r\n  <a-layout class=\"container\">\r\n    <a-layout-sider theme=\"light\" class=\"main-left\">\r\n    </a-layout-sider>\r\n    \r\n    <a-layout class=\"content\">\r\n      <a-form>\r\n        <div class=\"form-title\">\r\n          {{ formData.title }}\r\n        </div>\r\n\r\n        <a-divider></a-divider>\r\n      \r\n        <template v-for=\"(item, index) in formData.content\" :key=\"index\">\r\n          <a-form-item class=\"item-content\">\r\n            <FormGenerator :element=\"item\" />\r\n          </a-form-item>\r\n        </template>\r\n      </a-form>\r\n\r\n      <a-button type=\"primary\" class=\"submit-button\" @click=\"submit\"> 提交 </a-button>\r\n      \r\n    </a-layout>\r\n\r\n    <a-layout-sider theme=\"light\" class=\"main-right\">\r\n    </a-layout-sider>\r\n  </a-layout>\r\n</template>\r\n\r\n<script setup>\r\nimport { onBeforeMount, ref } from \"vue\";\r\nimport FormGenerator from \"@/components/Form/FormGenerator.vue\";\r\nimport axios from \"axios\";\r\nimport { useRouter, useRoute } from 'vue-router';\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\n\r\n// 表单相应地址\r\nconst subUrl = ref(\"\");\r\n\r\n// 表单信息\r\nconst formData = ref({\"title\":\"表单标题\",\"content\":[]});\r\n\r\n// 表单提交\r\nfunction submit() {\r\n  const submission = [];\r\n  for(let val of formData.value.content) {\r\n    if(val.options.type != 'text' && val.options.type != 'divider') {\r\n      submission.push({\r\n        field: val.field,\r\n        type: val.type,\r\n        value: val.options.value,\r\n      })\r\n    }\r\n  }\r\n  const submissionJson = JSON.stringify(submission);\r\n  axios.post('saveData.do', {\r\n    submission: submissionJson\r\n  })\r\n    .then((result) => {\r\n      console.log(result.data.formData);\r\n      router.push({ name: \"submissionFinish\" });\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\n// 在组件被挂载前调用\r\nonBeforeMount(() => {\r\n  subUrl.value = route?.query?.subUrl;\r\n\r\n  // 参数\r\n  const params = new URLSearchParams();\r\n  params.append(\"subUrl\", subUrl.value);\r\n  \r\n  // 请求表单信息\r\n  axios.post('formData.do', params)\r\n    .then((result) => {\r\n      console.log(result.data);\r\n      formData.value = result.data;\r\n      // 该表单不存在, 跳转 404\r\n      if(result.data == \"\") {\r\n        router.push({ name: \"notFound\" });\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    });\r\n})\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  height: 100vh;\r\n  width: 100vw;\r\n}\r\n\r\n.content {\r\n  overflow-y: scroll;\r\n}\r\n\r\n.form-title {\r\n  text-align: center;\r\n  font-size: 1rem;\r\n  font-family:  Georgia, 'Times New Roman', Times, serif;\r\n  margin-top: 10px;\r\n}\r\n\r\n.item-content {\r\n  margin-left: 10px;\r\n  margin-right: 10px;  \r\n  /** 去除边框 \r\n  border: 1px dashed rgba(55, 55, 55, 0.8);\r\n  */\r\n}\r\n\r\n.submit-button {\r\n  margin: 0 auto;\r\n  width: 100px;\r\n}\r\n\r\n@media (max-width: 680px) {\r\n  .main-left,\r\n  .main-right {\r\n    display: none;\r\n  }\r\n}\r\n</style>","import script from \"./PublicSubmission.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PublicSubmission.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PublicSubmission.vue?vue&type=style&index=0&id=2dd72924&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\86153\\\\OneDrive\\\\桌面\\\\软工\\\\lowcode\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2dd72924\"]])\n\nexport default __exports__"],"names":["__exports__","router","useRouter","route","useRoute","subUrl","ref","formData","submit","submission","val","value","content","options","type","push","field","submissionJson","JSON","stringify","axios","then","result","console","log","data","name","catch","err","onBeforeMount","query","params","URLSearchParams","append"],"sourceRoot":""}