{"version":3,"file":"js/15.b96433fc.js","mappings":"ifAiHA,MAAMA,GAAYC,EAAAA,EAAAA,IAAI,IAEhBC,GAAUD,EAAAA,EAAAA,IAAI,GAEdE,GAAWF,EAAAA,EAAAA,IAAI,IAGfG,GAAUH,EAAAA,EAAAA,KAAI,GAGdI,GAAYJ,EAAAA,EAAAA,IAAI,CACpB,CACE,IAAO,EACP,WAAc,CACZ,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,QAE/C,UAAa,CACX,CAAC,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,QAC9C,CAAC,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,UAIlD,CACE,IAAO,EACP,WAAc,CACZ,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,QAE/C,UAAa,CACX,CAAC,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,OAC9C,CAAC,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,SAIlD,CACE,IAAO,EACP,WAAc,CACZ,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,OAE/C,UAAa,CACX,CAAC,CAAC,QAAU,OAAQ,KAAO,UAAW,MAAQ,YAM9CK,GAAYL,EAAAA,EAAAA,IAAI,CACrB,CAAE,WAAc,UAAW,OAAU,CAAE,CAAE,UAAa,QAAU,CAAE,UAAa,UAAY,CAAE,UAAa,UAAY,CAAE,UAAa,aACrI,CAAE,WAAc,UAAW,OAAU,CAAE,CAAE,UAAa,QAAU,CAAE,UAAa,UAAY,CAAE,UAAa,UAAY,CAAE,UAAa,OAAS,CAAE,UAAa,aAC7J,CAAE,WAAc,UAAW,OAAU,CAAE,CAAE,UAAa,QAAU,CAAE,UAAa,SAAW,CAAE,UAAa,WAAa,CAAE,UAAa,eAIhIM,GAAaN,EAAAA,EAAAA,IAAI,IAEjBO,GAAYP,EAAAA,EAAAA,IAAI,IAEhBQ,GAAYR,EAAAA,EAAAA,IAAI,IAEhBS,GAAWT,EAAAA,EAAAA,IAAI,IAGfU,GAAcV,EAAAA,EAAAA,IAAIK,EAAUM,MAAMC,KAAIC,IACnC,CAACF,MAAOE,EAAIC,gBAGfC,GAAaC,EAAAA,EAAAA,KAAS,IACnBX,EAAUM,MAAMM,MAAKJ,GAAOA,EAAIC,YAAcR,EAAWK,SAAQO,OAAON,KAAIC,IAC1E,CAACF,MAAOE,EAAIM,gBAIjBC,GAAapB,EAAAA,EAAAA,IAAIK,EAAUM,MAAMC,KAAIC,IAClC,CAACF,MAAOE,EAAIC,gBAGfO,GAAYL,EAAAA,EAAAA,KAAS,IAClBX,EAAUM,MAAMM,MAAKJ,GAAOA,EAAIC,YAAcN,EAAUG,SAAQO,OAAON,KAAIC,IACzE,CAACF,MAAOE,EAAIM,gBAKjBG,EAAU,CACd,CACEC,MAAO,KACPC,UAAW,MACXC,IAAK,OAEP,CACEF,MAAO,MACPC,UAAW,aACXC,IAAK,cAEP,CACEF,MAAO,OACPC,UAAW,YACXC,IAAK,cAUT,SAASC,IAGPC,EAAAA,EAAAA,IAAU,cAAe,CACvBC,OAAQ,CACNC,KAAM,CACJ,CAACC,OAAQxB,EAAWK,MAAOO,OAAQ,IAAIX,EAAUI,QACjD,CAACmB,OAAQtB,EAAUG,MAAOO,OAAQ,IAAIT,EAASE,YAGlDoB,MAAMC,IACP5B,EAAUO,MAAQqB,EAAOH,KACzB1B,EAAQQ,OAAQ,CAAK,IACpBsB,OAAOC,IACRC,EAAAA,GAAAA,MAAc,QACdC,QAAQC,IAAIH,EAAM,GAEtB,CAGA,SAASI,EAAWC,EAAMrC,GAE1B,C,OAGAsC,EAAAA,EAAAA,KAAU,KACRb,EAAAA,EAAAA,IAAU,cACPI,MAAMC,IACL3B,EAAUM,MAAQqB,EAAOH,KAAKjB,KAAIC,IAChCA,EAAIK,OAASL,EAAIK,OAAON,KAAI6B,IAAS,CACnC,UAAaA,MAER,CACL,WAAc5B,EAAI6B,SAClB,OAAU7B,EAAIK,UAEhB,IAEHe,OAAOC,IACNE,QAAQC,IAAIH,EAAM,GAClB,I,uwEC7PN,MAAMS,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://lowcode/./src/views/admin/DataCollection.vue","webpack://lowcode/./src/views/admin/DataCollection.vue?864f"],"sourcesContent":["<template>\r\n  <!-- 表单信息收集页面 -->\r\n  <a-layout class=\"container\">\r\n    <a-row style=\"margin: 10px;\" justify=\"center\">\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 主集合名 </span>\r\n        <a-select\r\n          v-model:value=\"mainSchema\"\r\n          :options=\"mainSchemas\"\r\n          style=\"width: 200px\"\r\n        ></a-select>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 主集合属性 </span>\r\n        <!--\r\n          :max-tag-count=\"3\" 设置最多显示 3 个选项\r\n        -->\r\n        <a-select\r\n          v-model:value=\"mainField\"\r\n          :max-tag-count=\"3\"\r\n          :options=\"mainFields\"\r\n          mode=\"multiple\"\r\n          style=\"width: 200px\"\r\n        >\r\n        </a-select>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 补充集合名 </span>\r\n        <a-select\r\n          v-model:value=\"subSchema\"\r\n          :options=\"subSchemas\"\r\n          style=\"width: 200px\"\r\n        ></a-select>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :span=\"6\">\r\n        <span> 补充集合属性 </span>\r\n        <!--\r\n          :max-tag-count=\"3\" 设置最多显示 3 个选项\r\n        -->\r\n        <a-select\r\n          v-model:value=\"subField\"\r\n          :max-tag-count=\"3\"\r\n          :options=\"subFields\"\r\n          mode=\"multiple\"\r\n          style=\"width: 200px\"\r\n        ></a-select>\r\n      </a-col>\r\n    </a-row>\r\n    <a-button \r\n      type=\"primary\" \r\n      shape=\"round\" \r\n      :loading=\"loading\"\r\n      class=\"search-button\"\r\n      @click=\"search\"\r\n    >\r\n      <template #icon>\r\n        <SearchOutlined />\r\n      </template>\r\n      搜索选定内容\r\n    </a-button>\r\n    <!-- 分页器 -->\r\n    <a-pagination \r\n      v-model:current=\"current\" \r\n      v-model:pageSize=\"pageSize\"\r\n      :total=\"infoTotal\"\r\n      :showSizeChanger=\"false\"\r\n      :show-total=\"total => `总共有 ${total} 条记录`\"\r\n      show-less-items\r\n      show-quick-jumper\r\n      class=\"pagination\"\r\n      @change=\"(page, pageSize) => pageChange(page, pageSize)\"\r\n    />\r\n    <a-divider style=\"margin-top: 0;\"></a-divider>\r\n\r\n    <!-- <div v-for=\"(item, key) in infoGroup\" :key=\"key\">\r\n      <div v-for=\"(subitem, subkey) in item\" :key=\"subkey\">\r\n        <div v-if=\"!Array.isArray(subitem)\"> \r\n          {{ subitem.segment }} ---- {{ subitem.type }} ---- {{ subitem.value }}\r\n        </div>\r\n        <div v-else>\r\n          {{ subitem }}\r\n        </div>\r\n      </div>\r\n    </div> -->\r\n    <a-table\r\n      :dataSource=\"infoGroup\" \r\n      :columns=\"columns\"\r\n      :pagination=\"false\"\r\n      :loading=\"loading\"  \r\n      size=\"small\"\r\n      style=\"margin-left: 10px; margin-right: 10px;\"\r\n      bordered\r\n    >\r\n      <template #bodyCell=\"{ column, text, record }\">\r\n        <template v-if=\"column.dataIndex === 'mainSchema'\">\r\n          {{ text }}\r\n        </template>\r\n        <template v-else-if=\"column.dataIndex === 'subSchema'\">\r\n          {{ text }}\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n    \r\n  </a-layout>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, ref } from 'vue';\r\nimport axios from 'axios';\r\nimport { SearchOutlined } from '@ant-design/icons-vue';\r\nimport { message } from 'ant-design-vue';\r\n\r\n// 记录总条数\r\nconst infoTotal = ref(50);\r\n// 当前页\r\nconst current = ref(1);\r\n// 每页条数\r\nconst pageSize = ref(10);\r\n\r\n// 搜索执行情况\r\nconst loading = ref(false);\r\n\r\n// 信息集合\r\nconst infoGroup = ref([\r\n  {\r\n    \"key\": 1,\r\n    \"mainSchema\": [\r\n      {\"segment\":\"name\", \"type\":\"student\", \"value\":\"hyh\"}\r\n    ],\r\n    \"subSchema\": [\r\n      [{\"segment\":\"name\", \"type\":\"teacher\", \"value\":\"XXX\"}],\r\n      [{\"segment\":\"name\", \"type\":\"teacher\", \"value\":\"xyz\"}]  \r\n    ]\r\n  },\r\n  \r\n  {\r\n    \"key\": 2,\r\n    \"mainSchema\": [\r\n      {\"segment\":\"name\", \"type\":\"student\", \"value\":\"pzy\"}\r\n    ],\r\n    \"subSchema\": [\r\n      [{\"segment\":\"name\", \"type\":\"teacher\", \"value\":\"bb\"}],\r\n      [{\"segment\":\"name\", \"type\":\"teacher\", \"value\":\"aa\"}]\r\n    ]\r\n  },\r\n  \r\n  {\r\n    \"key\": 3,\r\n    \"mainSchema\": [\r\n      {\"segment\":\"name\", \"type\":\"student\", \"value\":\"hj\"}\r\n    ],\r\n    \"subSchema\": [\r\n      [{\"segment\":\"name\", \"type\":\"teacher\", \"value\":\"sss\"}]\r\n    ]\r\n  }\r\n]);\r\n\r\n// 类型数据\r\nconst typeDatas = ref([ \r\n { \"schemaName\": \"student\", \"fields\": [ { \"fieldName\": \"name\" }, { \"fieldName\": \"gender\" }, { \"fieldName\": \"number\" }, { \"fieldName\": \"project\" } ] },\r\n { \"schemaName\": \"teacher\", \"fields\": [ { \"fieldName\": \"name\" }, { \"fieldName\": \"gender\" }, { \"fieldName\": \"number\" }, { \"fieldName\": \"age\" }, { \"fieldName\": \"project\" } ] },\r\n { \"schemaName\": \"project\", \"fields\": [ { \"fieldName\": \"name\" }, { \"fieldName\": \"style\" }, { \"fieldName\": \"student\" }, { \"fieldName\": \"teacher\" } ] } \r\n])\r\n\r\n// 选中主集合名\r\nconst mainSchema = ref(\"\");\r\n// 选中主集合属性\r\nconst mainField = ref([]);\r\n// 选中补充集合名\r\nconst subSchema = ref(\"\");\r\n// 选中补充集合属性\r\nconst subField = ref([]);\r\n\r\n// 主集合名\r\nconst mainSchemas = ref(typeDatas.value.map(val => {\r\n  return {value: val.schemaName};\r\n}))\r\n// 主集合属性\r\nconst mainFields = computed(() => {\r\n  return typeDatas.value.find(val => val.schemaName == mainSchema.value)?.fields.map(val => {\r\n    return {value: val.fieldName};\r\n  });\r\n});\r\n// 补充集合名\r\nconst subSchemas = ref(typeDatas.value.map(val => {\r\n  return {value: val.schemaName};\r\n}))\r\n// 补充集合属性\r\nconst subFields = computed(() => {\r\n  return typeDatas.value.find(val => val.schemaName == subSchema.value)?.fields.map(val => {\r\n    return {value: val.fieldName};\r\n  });\r\n});\r\n\r\n// 表格列的配置描述\r\nconst columns = [\r\n  {\r\n    title: \"序号\",\r\n    dataIndex: \"key\",\r\n    key: \"key\",\r\n  },\r\n  {\r\n    title: \"主集合\",\r\n    dataIndex: \"mainSchema\",\r\n    key: \"mainSchema\",\r\n  },\r\n  {\r\n    title: \"补充集合\",\r\n    dataIndex: \"subSchema\",\r\n    key: \"subSchema\",\r\n  }\r\n]\r\n\r\n// 创建信息集合\r\nfunction createinfoGroupGroup(data) {\r\n\r\n}\r\n\r\n// 搜索\r\nfunction search() {\r\n  // 后端接入后使用\r\n  // loading.value = true;\r\n  axios.get(\"dataShow.do\", {\r\n    params: {\r\n      data: [\r\n        {schema: mainSchema.value, fields: [...mainField.value]},\r\n        {schema: subSchema.value, fields: [...subField.value]}\r\n      ]\r\n    }\r\n  }).then((result) => {\r\n    infoGroup.value = result.data;\r\n    loading.value = false;\r\n  }).catch((error) => {\r\n    message.error(\"搜索失败\");\r\n    console.log(error);\r\n  })\r\n}\r\n\r\n// 页数改变 \r\nfunction pageChange(page, pageSize) {\r\n\r\n}\r\n\r\n// 在组件挂载完成后执行\r\nonMounted(() => {\r\n  axios.get('getType.do')\r\n    .then((result) => {\r\n      typeDatas.value = result.data.map(val => {\r\n        val.fields = val.fields.map(field => ({\r\n          \"fieldName\": field\r\n        }));\r\n        return {\r\n          \"schemaName\": val.typeName,\r\n          \"fields\": val.fields\r\n        };\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    })\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  height: 100%;\r\n}\r\n\r\n.search-button {\r\n  margin: 6px auto;\r\n  width: 200px;\r\n}\r\n\r\n.pagination {\r\n  margin: 10px auto;\r\n}\r\n\r\n.download-button {\r\n  width: 100px;\r\n}\r\n\r\n@media (max-height: 480px) {\r\n  .container {\r\n    display: none;\r\n  }\r\n}\r\n</style>","import script from \"./DataCollection.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DataCollection.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DataCollection.vue?vue&type=style&index=0&id=ca6c76d4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\86153\\\\OneDrive\\\\桌面\\\\软工\\\\lowcode\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ca6c76d4\"]])\n\nexport default __exports__"],"names":["infoTotal","ref","current","pageSize","loading","infoGroup","typeDatas","mainSchema","mainField","subSchema","subField","mainSchemas","value","map","val","schemaName","mainFields","computed","find","fields","fieldName","subSchemas","subFields","columns","title","dataIndex","key","search","axios","params","data","schema","then","result","catch","error","message","console","log","pageChange","page","onMounted","field","typeName","__exports__"],"sourceRoot":""}