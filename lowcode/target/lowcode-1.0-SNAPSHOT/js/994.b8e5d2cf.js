"use strict";(self["webpackChunklowcode"]=self["webpackChunklowcode"]||[]).push([[994],{6729:function(e,a,t){t.d(a,{z:function(){return n}});var l=t(2074);const n=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{l.ZP.success("复制成功",2)})).catch((e=>{l.ZP.success("复制失败",2),console.log(e)}));else{const a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),a.setSelectionRange(0,a.value.length),document.execCommand("Copy"),document.body.removeChild(a),l.ZP.success("复制成功",2)}}},3994:function(e,a,t){t.r(a),t.d(a,{default:function(){return P}});t(7658);var l=t(3396),n=t(4870),u=t(7139),o=t(4161),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},c=i,r=t(9388);function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(a){v(e,a,t[a])}))}return e}function v(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var d=function(e,a){var t=s({},e,a.attrs);return(0,l.Wm)(r.Z,s({},t,{icon:c}),null)};d.displayName="ClearOutlined",d.inheritAttrs=!1;var m=d,p=t(3927),f={icon:function(e,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M232 706h142c22.1 0 40 17.9 40 40v142h250V264H232v442z",fill:a}},{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32z",fill:e}},{tag:"path",attrs:{d:"M704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z",fill:e}}]}},name:"copy",theme:"twotone"},h=f;function g(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(a){w(e,a,t[a])}))}return e}function w(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var y=function(e,a){var t=g({},e,a.attrs);return(0,l.Wm)(r.Z,g({},t,{icon:h}),null)};y.displayName="CopyTwoTone",y.inheritAttrs=!1;var b=y,k=t(2074),H=t(6729);const x=e=>((0,l.dD)("data-v-6b8cb78a"),e=e(),(0,l.Cn)(),e),S=x((()=>(0,l._)("span",null," 主集合名 ",-1))),_=x((()=>(0,l._)("span",null," 主集合属性 ",-1))),C=x((()=>(0,l._)("span",null," 补充集合名 ",-1))),W=x((()=>(0,l._)("span",null," 补充集合属性 ",-1))),O={style:{margin:"6px auto"}};var z={__name:"DataCollection",setup(e){const a=(0,n.iH)(0),t=(0,n.iH)(1),i=(0,n.iH)(10),c=(0,n.iH)([]),r=(0,n.iH)([]),s=(0,n.iH)(""),v=(0,n.iH)([]),d=(0,n.iH)(""),f=(0,n.iH)([]),h=(0,n.iH)([]),g=(0,n.iH)(!1),w=(0,n.iH)(!1),y=(0,n.iH)([]),x=(0,l.Fl)((()=>r.value.find((e=>e.schemaName==s.value))?.fields.map((e=>({value:e.fieldName}))))),z=(0,n.iH)([]),j=(0,l.Fl)((()=>r.value.find((e=>e.schemaName==d.value))?.fields.map((e=>({value:e.fieldName}))))),U=[{title:"序号",dataIndex:"key",key:"key"},{title:"主集合",dataIndex:"mainSchema",key:"mainSchema"},{title:"补充集合",dataIndex:"subSchema",key:"subSchema"}];function P(e){c.value=e.map(((e,a)=>{const l=[],n=[];for(let t of e)Array.isArray(t)?n.push(t):l.push(t);return{key:(t.value-1)*i.value+a+1,mainSchema:l,subSchema:n}}))}function N(){s.value="",v.value=[],d.value="",f.value=[]}function V(e,t){w.value=!0,o.Z.post("dataShow.do",{page:e,pageSize:t,value:[{schema:s.value,fields:[...v.value]},{schema:d.value,fields:[...f.value]}]}).then((e=>{a.value=e.data.infoTotal,P(e.data.res),w.value=!1})).catch((e=>{k.ZP.error("搜索失败"),console.log(e),w.value=!1}))}function Z(e,a){V(e,a)}function I(e){h.value=e,g.value=!0}return(0,l.bv)((()=>{o.Z.get("getType.do").then((e=>{r.value=e.data.map((e=>(e.fields=e.fields.map((e=>({fieldName:e}))),{schemaName:e.schemaName,fields:e.fields}))),y.value=r.value.map((e=>({value:e.schemaName}))),z.value=r.value.map((e=>({value:e.schemaName})))})).catch((e=>{console.log(e)}))})),(e,o)=>{const r=(0,l.up)("a-select"),k=(0,l.up)("a-col"),P=(0,l.up)("a-row"),M=(0,l.up)("a-button"),T=(0,l.up)("a-pagination"),D=(0,l.up)("a-divider"),A=(0,l.up)("a-tag"),E=(0,l.up)("a-table"),q=(0,l.up)("a-list-item"),B=(0,l.up)("a-list"),F=(0,l.up)("a-modal"),K=(0,l.up)("a-layout");return(0,l.wg)(),(0,l.j4)(K,{class:"container"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{style:{margin:"10px"},justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"gutter-row",span:6},{default:(0,l.w5)((()=>[S,(0,l.Wm)(r,{value:s.value,"onUpdate:value":o[0]||(o[0]=e=>s.value=e),options:y.value,style:{width:"200px"}},null,8,["value","options"])])),_:1}),(0,l.Wm)(k,{class:"gutter-row",span:6},{default:(0,l.w5)((()=>[_,(0,l.Wm)(r,{value:v.value,"onUpdate:value":o[1]||(o[1]=e=>v.value=e),"max-tag-count":3,options:x.value,mode:"multiple",style:{width:"200px"}},null,8,["value","options"])])),_:1}),(0,l.Wm)(k,{class:"gutter-row",span:6},{default:(0,l.w5)((()=>[C,(0,l.Wm)(r,{value:d.value,"onUpdate:value":o[2]||(o[2]=e=>d.value=e),options:z.value,style:{width:"200px"}},null,8,["value","options"])])),_:1}),(0,l.Wm)(k,{class:"gutter-row",span:6},{default:(0,l.w5)((()=>[W,(0,l.Wm)(r,{value:f.value,"onUpdate:value":o[3]||(o[3]=e=>f.value=e),"max-tag-count":3,options:j.value,mode:"multiple",style:{width:"200px"}},null,8,["value","options"])])),_:1})])),_:1}),(0,l._)("div",O,[(0,l.Wm)(M,{shape:"round",style:{width:"100px",margin:"6px"},onClick:N},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(m))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 清空 ")])),_:1}),(0,l.Wm)(M,{type:"primary",shape:"round",loading:w.value,style:{width:"200px",margin:"6px"},onClick:o[4]||(o[4]=e=>V(1,i.value))},{icon:(0,l.w5)((()=>[(0,l.Wm)((0,n.SU)(p.Z))])),default:(0,l.w5)((()=>[(0,l.Uk)(" 搜索选定内容 ")])),_:1},8,["loading"])]),(0,l.Wm)(T,{current:t.value,"onUpdate:current":o[5]||(o[5]=e=>t.value=e),pageSize:i.value,"onUpdate:pageSize":o[6]||(o[6]=e=>i.value=e),total:a.value,showSizeChanger:!1,"show-total":e=>`总共有 ${e} 条记录`,"show-less-items":"","show-quick-jumper":"",class:"pagination",onChange:o[7]||(o[7]=(e,a)=>Z(e,a))},null,8,["current","pageSize","total","show-total"]),(0,l.Wm)(D,{class:"divider"}),(0,l.Wm)(E,{dataSource:c.value,columns:U,pagination:!1,loading:w.value,size:"small",style:{"margin-left":"10px","margin-right":"10px"},bordered:""},{bodyCell:(0,l.w5)((({column:e,text:a,record:t})=>["mainSchema"===e.dataIndex?((0,l.wg)(),(0,l.j4)(A,{key:0,onClick:()=>I(a)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 主集合记录 1 ")])),_:2},1032,["onClick"])):"subSchema"===e.dataIndex?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(a,((e,a)=>((0,l.wg)(),(0,l.j4)(A,{key:a,onClick:()=>I(e)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 补充集合记录 "+(0,u.zw)(a+1),1)])),_:2},1032,["onClick"])))),128)):(0,l.kq)("",!0)])),_:1},8,["dataSource","loading"]),(0,l.Wm)(F,{visible:g.value,"onUpdate:visible":o[8]||(o[8]=e=>g.value=e),title:"记录详情",okText:"确定",cancelText:" ",destroyOnClose:!0,onOk:o[9]||(o[9]=()=>g.value=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{bordered:"","data-source":h.value},{renderItem:(0,l.w5)((({item:e})=>[(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,(0,u.zw)(e.schema)+"-"+(0,u.zw)(e.field),1),(0,l._)("div",null,[(0,l.Uk)((0,u.zw)(e.value)+" ",1),(0,l.Wm)((0,n.SU)(b),{onClick:()=>(0,n.SU)(H.z)(e.value)},null,8,["onClick"])])])),_:2},1024)])),_:1},8,["data-source"])])),_:1},8,["visible"])])),_:1})}}},j=t(89);const U=(0,j.Z)(z,[["__scopeId","data-v-6b8cb78a"]]);var P=U}}]);
//# sourceMappingURL=994.b8e5d2cf.js.map